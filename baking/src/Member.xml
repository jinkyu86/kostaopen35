<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		
<mapper namespace="Member">		

	<parameterMap type="kr.or.kosta.member.Member" id="insertParameterMap">
	   	<parameter property="memberid"/>
		<parameter property="password"/>
		<parameter property="name"/>
		<parameter property="regiNumber"/>
		<parameter property="pwHint"/>
		<parameter property="pwAnswer"/>
		<parameter property="zipcode"/>
		<parameter property="address"/>
		<parameter property="strAddress"/>
		<parameter property="email"/>
		<parameter property="phoneNumber"/>
		<parameter property="telNumber"/>
	</parameterMap>
	
	<parameterMap type="kr.or.kosta.member.Member" id="updateParameterMap">
		<parameter property="password"/>
		<parameter property="zipcode"/>
		<parameter property="address"/>
		<parameter property="strAddress"/>
		<parameter property="email"/>
		<parameter property="phoneNumber"/>
		<parameter property="telNumber"/>
		<parameter property="memberid"/>
	</parameterMap>
	
	<parameterMap type="kr.or.kosta.member.Member" id="selectidSearchParameterMap">
		<parameter property="name"/>
		<parameter property="regiNumber"/>
	</parameterMap>
	
	<parameterMap type="kr.or.kosta.member.Member" id="selectpwSearchParameterMap">
		<parameter property="pwHint"/>
		<parameter property="pwAnswer"/>
	</parameterMap>
	
	<parameterMap type="kr.or.kosta.member.Member" id="selectLoginParameterMap">
		<parameter property="memberid"/>
		<parameter property="password"/>
	</parameterMap>
	
	<resultMap type="kr.or.kosta.member.Member" id="selectResultMap">
		<result property="memberid"		column="memberid"/>		
		<result property="password"		column="password"/>
		<result property="name"			column="name"/>
		<result property="regiNumber"	column="regi_number"/>
		<result property="pwHint"		column="pw_hint"/>
		<result property="pwAnswer"		column="pw_answer"/>
		<result property="zipcode"		column="zipcode"/>
		<result property="address"		column="address"/>
		<result property="strAddress"	column="str_address"/>
		<result property="email"		column="email"/>
		<result property="phoneNumber"	column="phone_number"/>
		<result property="telNumber"	column="tel_number"/>
	</resultMap>

	<insert id="insertMember" parameterMap="insertParameterMap">
		INSERT INTO member(memberid, password, name, regi_number, pw_hint, pw_answer, zipcode, address,
						   str_address,email,phone_number,tel_number)
		VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</insert>
	
	<update id="updateMember" parameterMap="updateParameterMap">
		UPDATE member 
		SET password=?, zipcode=?, address=?, str_address=?, email=?, phone_number=?, tel_number=?
		WHERE memberid=?
	</update>
	
	<delete id="deleteMember">
		DELETE FROM member
		WHERE memberid=#{memberId}
	</delete>
	
	<select id="idSearchMember"  parameterMap="selectidSearchParameterMap" resultMap="selectResultMap">
		SELECT memberid, password, name, regi_number, pw_hint, pw_answer, zipcode, address,
			   str_address, email, phone_number, tel_number
		FROM member
		WHERE name=? AND regi_number=?
	</select>
	
	<select id="pwSearchMember" parameterMap="selectpwSearchParameterMap" resultMap="selectResultMap">
		SELECT memberid, password, name, regi_number, pw_hint, pw_answer, zipcode, address
			   str_address, email, phone_number, tel_number
		FROM member
		WHERE PW_hint=? AND PW_answer=?
	</select>
		
	<select id="login" parameterMap="selectLoginParameterMap" resultMap="selectResultMap">	
		SELECT memberid, password, name, regi_number, pw_hint, pw_answer, zipcode, address
			   str_address, email, phone_number, tel_number
		FROM member
		WHERE memberid=? AND password=?
	</select>
	
	<select id="selectMember" resultMap="selectResultMap">	
		SELECT memberid, password, name, regi_number, pw_hint, pw_answer, zipcode, address
			   str_address, email, phone_number, tel_number
		FROM member
		WHERE memberid=#{memberid}
	</select>
	
</mapper>